# 明日方舟人事部档案

一个用于《明日方舟》游戏抽卡记录分析的桌面应用程序。它可以帮助博士们轻松地获取、存储和分析自己的寻访记录，通过直观的图表了解自己的抽卡运势。

## 功能特性

- 🖥️ **系统托盘应用**: 程序以后台服务形式运行，通过系统托盘图标提供便捷的菜单操作。
- 🌐 **内嵌 Web 界面**: 无需额外配置，自动在本地启动 Web 服务器，通过浏览器即可访问功能丰富的分析界面。
- 🔄 **自动数据获取**: 能够自动连接到官方服务器，拉取您账号下最新的抽卡记录。
- 👥 **多用户/多账号支持**: 为每个系统用户和游戏账号创建独立的数据空间，数据互不干扰。
- 📊 **丰富的数据可视化**: 提供多种统计图表，包括干员获取分布、卡池详情、出率统计、保底分析等，让您对自己的“沉没成本”一目了然。
- 🔒 **本地数据存储**: 所有数据均存储在您的本地计算机上，保护您的隐私安全。

## 安装与运行

### 前提条件

确保您的系统已安装 Python 3.8 或更高版本。

### 安装步骤

1.  **克隆仓库**
    ```bash
    git clone https://github.com/AndyArno/Arknights-HR-Archives.git
    cd Arknights-HR-Archives
    ```

2.  **安装依赖**
    ```bash
    pip install -r requirements.txt
    ```

3.  **运行应用**
    ```bash
    python app.py
    ```

程序启动后，您会在任务栏的通知区域（系统托盘）看到一个“明日方舟人事部档案”的图标。右键点击该图标，即可打开功能菜单。

## 使用说明

### 1. 打开 Web 界面

- 右键点击系统托盘图标。
- 选择 **“打开Web界面”**。
- 您的默认浏览器将会自动打开 `http://127.0.0.1:16300`，进入应用的主页。

### 2. 用户系统

- **首次使用**: 您需要注册一个本地系统账号。Web 界面会引导您完成注册和登录。
- **管理员账号**: 系统会自动创建一个 `admin` 用户，您可以在首次运行后通过 Web 界面修改其密码（默认密码为admin）或创建新用户。

### 3. 添加游戏账号并更新数据

- 登录后，进入“个人中心”或“档案管理”页面。
- 点击 **“添加游戏账号”**，输入您的游戏 UID 和相关认证信息（通常为手机号或邮箱及密码）。
- 添加成功后，返回系统托盘菜单，选择 **“更新数据”**。程序将自动为您配置的账号拉取最新的抽卡记录。
- 您也可以在 Web 界面中直接触发数据更新。

### 4. 查看分析报告

数据更新完成后，您可以在 Web 界面中查看：
- **抽卡总览**: 总抽数、六星/五星干员数量、平均出金/出紫抽数等。
- **卡池详情**: 查看每个卡池的抽卡记录和统计。
- **干员分布**: 按稀有度、职业等维度展示已获取干员的分布情况。
- **出率分析**: 将您的出率与官方公布的标准出率进行对比。

## 数据存储

为了方便管理和保护您的隐私，所有数据都采用本地文件存储。

### 文件结构

```
Arknights-HR-Archives/
├── users/                    # 系统用户数据根目录
│   ├── {您的系统用户名}/      # 每个系统用户一个子目录
│   │   ├── user.json         # 存储您的系统账号信息（密码已哈希）
│   │   └── accounts/         # 您添加的游戏账号目录
│   │       └── {游戏UID}/    # 每个游戏账号一个子目录
│   │           ├── config.json # 存储该游戏账号的认证配置
│   │           ├── data.json   # 存储该账号的抽卡记录
│   │           └── metadata.json # 存储数据元信息（如最后更新时间）
├── config/system.json        # 系统全局配置（如API地址）
└── ...
```

### 数据格式说明

抽卡记录 (`data.json`) 和元数据 (`metadata.json`) 的具体格式定义，请参考 [Arknights-HR-Archives.wiki/数据格式说明.md](Arknights-HR-Archives.wiki/数据格式说明.md)。

## 贡献

我们欢迎任何形式的贡献！如果您有好的想法、发现了 Bug 或者愿意提交代码，请按以下步骤操作：

1.  Fork 本仓库。
2.  创建您的特性分支 (`git checkout -b feature/AmazingFeature`)。
3.  提交您的更改 (`git commit -m 'Add some AmazingFeature'`)。
4.  推送到分支 (`git push origin feature/AmazingFeature`)。
5.  开启一个 Pull Request。

## 许可证

本项目基于 AGPLv3 许可证开源 - 详情请参阅 [LICENSE](LICENSE) 文件。

## 免责声明

本工具仅供学习和研究使用。所有数据均来自《明日方舟》官方服务器，请遵守游戏用户协议。开发者不对因使用本工具而导致的任何账号问题承担责任。
